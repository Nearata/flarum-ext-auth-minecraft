(()=>{var t={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},d:(o,n)=>{for(var e in n)t.o(n,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";function n(t,o){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},n(t,o)}t.r(o);const e=flarum.core.compat["common/components/Button"];var r=t.n(e);const a=flarum.core.compat["common/components/Modal"];var i=t.n(a);const u=flarum.core.compat["forum/app"];var c=t.n(u),l=function(t,o){return void 0===o&&(o={}),c().translator.trans("nearata-auth-minecraft.forum."+t,o)},s=function(t){var o,e;function a(){return t.apply(this,arguments)||this}e=t,(o=a).prototype=Object.create(e.prototype),o.prototype.constructor=o,n(o,e);var i=a.prototype;return i.oninit=function(o){t.prototype.oninit.call(this,o)},i.className=function(){return"MinecraftLogInModal Modal--small"},i.title=function(){return l("log_in_modal.title")},i.content=function(){return[m(".Modal-body",[m(".Form.Form--centered",[m("p.helpText",l("modal_help",{server:c().forum.attribute("nearataMinecraftServerIp")})),m(".Form-group",[m(r(),{type:"submit",className:"Button Button--primary Button--block",loading:this.loading},l("log_in_modal.submit_button"))])])])]},i.onsubmit=function(t){t.preventDefault(),this.loading=!0,c().request({url:c().forum.attribute("apiUrl")+"/auth/minecraft",method:"POST",errorHandler:this.onerror.bind(this)}).then((function(t){c().authenticationComplete(t)})).catch((function(){})).then(this.loaded.bind(this))},i.onerror=function(o){400===o.status&&(o.alert.content=l("login_error")),t.prototype.onerror.call(this,o)},a}(i());const p=flarum.core.compat["common/extend"],f=flarum.core.compat["forum/components/LogInButtons"];var d=t.n(f);const b=flarum.core.compat["forum/components/SettingsPage"];var h=t.n(b);c().initializers.add("nearata-auth-minecraft",(function(){(0,p.extend)(d().prototype,"items",(function(t){var o=c().forum.attribute("baseUrl"),n=m("button",{class:"Button LogInButton LogInButton--minecraft hasIcon",type:"button",onclick:function(){return c().modal.show(s)}},[m("img",{class:"icon Button-icon",src:o+"/assets/extensions/nearata-auth-minecraft/minecraft-icon.png"}),m("span.Button-label",[c().translator.trans("nearata-auth-minecraft.forum.log_in_button_title")])]);t.add("nearataAuthMinecraft",n)})),(0,p.extend)(h().prototype,"accountItems",(function(t){this.user.attribute("nearataAuthMinecraftFromServer")&&t.remove("changeEmail")}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map