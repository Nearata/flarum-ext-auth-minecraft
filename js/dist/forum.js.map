{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nearata/flarum-ext-auth-minecraft/./src/forum/components/MinecraftLogInModal.js","webpack://@nearata/flarum-ext-auth-minecraft/./src/forum/index.js","webpack://@nearata/flarum-ext-auth-minecraft/external root \"flarum.core.compat['common/components/Button']\"","webpack://@nearata/flarum-ext-auth-minecraft/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@nearata/flarum-ext-auth-minecraft/external root \"flarum.core.compat['common/extend']\"","webpack://@nearata/flarum-ext-auth-minecraft/external root \"flarum.core.compat['forum/app']\"","webpack://@nearata/flarum-ext-auth-minecraft/external root \"flarum.core.compat['forum/components/LogInButtons']\"","webpack://@nearata/flarum-ext-auth-minecraft/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@nearata/flarum-ext-auth-minecraft/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nearata/flarum-ext-auth-minecraft/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nearata/flarum-ext-auth-minecraft/webpack/bootstrap","webpack://@nearata/flarum-ext-auth-minecraft/webpack/runtime/compat get default export","webpack://@nearata/flarum-ext-auth-minecraft/webpack/runtime/define property getters","webpack://@nearata/flarum-ext-auth-minecraft/webpack/runtime/hasOwnProperty shorthand","webpack://@nearata/flarum-ext-auth-minecraft/webpack/runtime/make namespace object","webpack://@nearata/flarum-ext-auth-minecraft/./forum.js"],"sourcesContent":["import Button from \"flarum/common/components/Button\";\nimport Modal from \"flarum/common/components/Modal\";\nimport app from \"flarum/forum/app\";\n\nconst trans = (key, options = {}) => {\n    return app.translator.trans(`nearata-auth-minecraft.forum.${key}`, options);\n};\n\nexport default class MinecraftLogInModal extends Modal {\n    oninit(vnode) {\n        super.oninit(vnode);\n    }\n\n    className() {\n        return \"MinecraftLogInModal Modal--small\";\n    }\n\n    title() {\n        return trans(\"log_in_modal.title\");\n    }\n\n    content() {\n        return [\n            m(\".Modal-body\", [\n                m(\".Form.Form--centered\", [\n                    m(\n                        \"p.helpText\",\n                        trans(\"modal_help\", {\n                            server: app.forum.attribute(\n                                \"nearataMinecraftServerIp\"\n                            ),\n                        })\n                    ),\n                    m(\".Form-group\", [\n                        m(\n                            Button,\n                            {\n                                type: \"submit\",\n                                className:\n                                    \"Button Button--primary Button--block\",\n                                loading: this.loading,\n                            },\n                            trans(\"log_in_modal.submit_button\")\n                        ),\n                    ]),\n                ]),\n            ]),\n        ];\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        app.request({\n            url: `${app.forum.attribute(\"apiUrl\")}/auth/minecraft`,\n            method: \"POST\",\n            errorHandler: this.onerror.bind(this),\n        })\n            .then((response) => {\n                app.authenticationComplete(response);\n            })\n            .catch(() => {})\n            .then(this.loaded.bind(this));\n    }\n\n    onerror(error) {\n        if (error.status === 400) {\n            error.alert.content = trans(\"login_error\");\n        }\n\n        super.onerror(error);\n    }\n}\n","import MinecraftLogInModal from \"./components/MinecraftLogInModal\";\nimport { extend } from \"flarum/common/extend\";\nimport app from \"flarum/forum/app\";\nimport LogInButtons from \"flarum/forum/components/LogInButtons\";\nimport SettingsPage from \"flarum/forum/components/SettingsPage\";\n\napp.initializers.add(\"nearata-auth-minecraft\", () => {\n    extend(LogInButtons.prototype, \"items\", function (items) {\n        const base = app.forum.attribute(\"baseUrl\");\n\n        const button = m(\n            \"button\",\n            {\n                class: \"Button LogInButton LogInButton--minecraft hasIcon\",\n                type: \"button\",\n                onclick: () => app.modal.show(MinecraftLogInModal),\n            },\n            [\n                m(\"img\", {\n                    class: \"icon Button-icon\",\n                    src: `${base}/assets/extensions/nearata-auth-minecraft/minecraft-icon.png`,\n                }),\n                m(\"span.Button-label\", [\n                    app.translator.trans(\n                        \"nearata-auth-minecraft.forum.log_in_button_title\"\n                    ),\n                ]),\n            ]\n        );\n\n        items.add(\"nearataAuthMinecraft\", button);\n    });\n\n    extend(SettingsPage.prototype, \"accountItems\", function (items) {\n        const user = this.user;\n\n        if (user.attribute(\"nearataAuthMinecraftFromServer\")) {\n            items.remove(\"changeEmail\");\n        }\n    });\n});\n","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/LogInButtons'];","module.exports = flarum.core.compat['forum/components/SettingsPage'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/forum';\n"],"names":["Button","Modal","app","trans","key","options","translator","MinecraftLogInModal","oninit","vnode","className","title","content","m","server","forum","attribute","type","loading","onsubmit","e","preventDefault","request","url","method","errorHandler","onerror","bind","then","response","authenticationComplete","loaded","error","status","alert","extend","LogInButtons","SettingsPage","initializers","add","prototype","items","base","button","onclick","modal","show","src","user","remove","setPrototypeOf","_inheritsLoose","subClass","superClass","Object","create","constructor","_setPrototypeOf","o","p","__proto__"],"sourceRoot":""}